{
  "type": "AdaptiveCard",
  "version": "1.4",
  "body": [
    {
      "type": "Container",
      "style": "emphasis",
      "items": [
        {
          "type": "ColumnSet",
          "columns": [
            {
              "type": "Column",
              "width": "auto",
              "items": [
                {
                  "type": "Image",
                  "url": "https://wac-cdn.atlassian.com/dam/jcr:e2a6f06f-b3d5-4002-aed3-73539c56a2eb/bitbucket_rgb_blue.png",
                  "size": "Small",
                  "style": "Person"
                }
              ]
            },
            {
              "type": "Column",
              "width": "stretch",
              "items": [
                {
                  "type": "TextBlock",
                  "text": "${title}",
                  "weight": "Bolder",
                  "size": "Medium",
                  "wrap": true
                },
                {
                  "type": "TextBlock",
                  "text": "${subtitle}",
                  "spacing": "None",
                  "isSubtle": true,
                  "wrap": true
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "type": "Container",
      "items": [
        {
          "type": "FactSet",
          "facts": [
            {
              "title": "Repository:",
              "value": "${repository}"
            },
            {
              "title": "Event:",
              "value": "${action}"
            },
            {
              "title": "Author:",
              "value": "${author}"
            }
          ]
        }
      ]
    },
    {
      "type": "Container",
      "$when": "${event_category == 'pull_request'}",
      "items": [
        {
          "type": "FactSet",
          "facts": [
            {
              "title": "PR ID:",
              "value": "${pr_id}"
            },
            {
              "title": "Source Branch:",
              "value": "${source_branch}"
            },
            {
              "title": "Target Branch:",
              "value": "${target_branch}"
            },
            {
              "title": "State:",
              "value": "${state}"
            }
          ]
        }
      ]
    },
    {
      "type": "Container",
      "$when": "${event_category == 'push'}",
      "items": [
        {
          "type": "FactSet",
          "facts": [
            {
              "title": "Branch:",
              "value": "${branch}"
            },
            {
              "title": "Commits:",
              "value": "${commit_count}"
            }
          ]
        },
        {
          "type": "Container",
          "$when": "${commits != null && commits.length > 0}",
          "items": [
            {
              "type": "TextBlock",
              "text": "Recent Commits:",
              "weight": "Bolder",
              "size": "Small"
            },
            {
              "type": "Container",
              "$data": "${commits}",
              "items": [
                {
                  "type": "TextBlock",
                  "text": "â€¢ ${hash}: ${message}",
                  "wrap": true,
                  "size": "Small",
                  "spacing": "Small"
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "type": "Container",
      "$when": "${event_category == 'comment'}",
      "items": [
        {
          "type": "FactSet",
          "facts": [
            {
              "title": "Context:",
              "value": "${context_title}"
            }
          ]
        },
        {
          "type": "Container",
          "$when": "${description != null && description != ''}",
          "items": [
            {
              "type": "TextBlock",
              "text": "Comment:",
              "weight": "Bolder",
              "size": "Small"
            },
            {
              "type": "TextBlock",
              "text": "${description}",
              "wrap": true,
              "size": "Small",
              "spacing": "Small",
              "style": "emphasis"
            }
          ]
        }
      ]
    },
    {
      "type": "Container",
      "$when": "${event_category == 'commit_status'}",
      "items": [
        {
          "type": "FactSet",
          "facts": [
            {
              "title": "Build:",
              "value": "${build_name}"
            },
            {
              "title": "Status:",
              "value": "${build_status}"
            },
            {
              "title": "Commit:",
              "value": "${commit_hash}"
            }
          ]
        },
        {
          "type": "Container",
          "$when": "${description != null && description != ''}",
          "items": [
            {
              "type": "TextBlock",
              "text": "${description}",
              "wrap": true,
              "size": "Small",
              "isSubtle": true
            }
          ]
        }
      ]
    }
  ],
  "actions": [
    {
      "type": "Action.OpenUrl",
      "title": "View in Bitbucket",
      "url": "${url}",
      "$when": "${url != null && url != ''}"
    }
  ],
  "msteams": {
    "width": "Full"
  }
}